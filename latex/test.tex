\title{A Very Simple \LaTeXe{} Template}
\author{
        Vitaly Surazhsky \\
                Department of Computer Science\\
        Technion---Israel Institute of Technology\\
        Technion City, Haifa 32000, \underline{Israel}
            \and
        Yossi Gil\\
        Department of Computer Science\\
        Technion---Israel Institute of Technology\\
        Technion City, Haifa 32000, \underline{Israel}
}
\date{\today}

\documentclass[12pt]{article}

\usepackage{makeidx}
\makeindex

\include{pygments}
\include{listings}

\usepackage{amsmath}

%for images
\usepackage{graphicx}

\begin{document}
\maketitle

\section{python}\index{python}

\subsection{Testing}
\scriptsize
\input{testing}

\subsection{Profiling}
\input{profiling}

\subsection{string}\index{python!string}

\subsubsection{String Substitution}\index{python!string!Substitution}

\input{string_substitution}

\subsubsection{split}\index{python!string!split}
\input{split}

	

\subsection{hash}\index{python!hash}

Implements a hash function, that is irreversible, gives a unique output and changing the input just a litte, gives a totally different output.

\begin{list}{*}{
\setlength{\itemsep}{0pt}
\setlength{\parsep}{0pt}
\setlength{\topsep}{0pt}
\setlength{\partopsep}{0pt}
\setlength{\leftmargin}{2em}
\setlength{\labelwidth}{1.5em}
\setlength{\labelsep}{0.5em}
}
\item \textbf{crc32} - Designed for checksums. It's fast, but its security properties are not very good - it's very easy to find a \emph{collision}, when two things hash to the same value.
\item \textbf{md5} - Used to be used because it was pretty fast and pretty secured. But it's not secure any longer - it's easy to find collisions. It's found on every system.
\item \textbf{sha1} - Not as fast, but fairly secured. Second most widely used hash after md5.
\item \textbf{sha256} - If you are really worried about securing your data, but it's the slowest.
\item \textbf{bcrypt} - Besides incorporating a salt to protect against rainbow table attacks, bcrypt is an adaptive hash: over time it can be made slower and slower so it remains resistant to specific brute-force search attacks against the hash and the salt.
\end{list}

\subsubsection{get}\index{python!hash!get}

Does not generate a \emph{KeyError} when referencing a key that does not exist in the hash, unlike using the sqare brackets.

\input{hash_get}


\subsubsection{defaultdict}\index{python!hash!defaultdict}

\input{hash_defaultdict}


\subsubsection{merge}\index{python!hash!merge}

Merge two or more dictionaries

\input{hash_merge}



\subsection{list}\index{python!list}

\subsubsection{map}\index{python!list!map}

\input{map}



\subsection{itertools}\index{itertools}

\subsubsection{permutations}
\input{permutations}




\subsection{random}\index{python!random}

\subsubsection{choice}\index{python!random!choice}

\input{random_choice}



\subsection{range vs xrange}\index{python!range}\index{python!xrange}

range creates a list in memory, but xrange is a generator, so it evaluates lazily.




\subsection{lambda}

\input{lambda}


\subsection{Something}

\subsubsection{\_\_name\_\_}

\input{debug_fn_name}

\subsubsection{\_\_doc\_\_}

\input{debug_fn_doc}




\subsection{classes}

\input{class}


\subsection{Structured Query Language - SQL}\index{SQL}

Invented in the 1970s.

\input{sqlite}

\subsubsection{index}\index{SQL!index}

A \emph{sequential scan}\index{SQL!index!sequential scan} doesn't work fine when you have a million rows to scan. Indexes increase the speed of database reads, but probably decrease the speed of database inserts, since the indexes have to be updated.

\begin{tabular}{l}
explain analyze select name from users where id = 123; \\
create index user\_id on users(id); \\
drop index user\_id;
\end{tabular}

\textbf{hashtable}, not sorted, lookup in constant time

\textbf{tree}, sorted, lookup in the log n order



\subsection{ACID}\index{ACID}

\textbf{Atomicity.} All parts of a \emph{transaction} succeed or fail together.

\textbf{Consistency.} The database will always be consistent. The database will move from one valid transaction to the next. \emph{Replication lag}\index{ACID!replication lag} is an example of the loss of consistency.

\textbf{Isolation.} No transaction can interfere with another's. Sometimes accomplished by \emph{locking}\index{ACID!locking}.

\textbf{Durability.} Once the transaction is comitted, it won't be lost.



\subsection{Generator Expressions}\index{Generator Expressions}

\begin{list}{*}{
\setlength{\itemsep}{0pt}
\setlength{\parsep}{0pt}
\setlength{\topsep}{0pt}
\setlength{\partopsep}{0pt}
\setlength{\leftmargin}{2em}
\setlength{\labelwidth}{1.5em}
\setlength{\labelsep}{0.5em}
}
\item less indentation, compared to nested for-loops
\item stop early, compared to a list comprehension that has to do all the work
\item easy to edit, easy to move around constraints without having to worry about getting the indentation right
\end{list}

\input{generator_expressions}




\subsection{Generator Functions}\index{Generator Functions}

Allows us to deal with infinite sequences.

\input{generator_functions}

Print only odd numbers

\input{generator_odds_only}



\subsection{Decorator Notation}\index{Decorator Notation}

\subsubsection{Function Mapping - An expressiveness tool}

Extend a binary function to a function that can take any number of arguments.

\input{n_ary}

This pattern is so common in python, that there's a special notation for it, called the Decorator Notation.

\input{seq_decorated}

But there is one problem with how we have specfied this decorator. In an interactive session, asking for help on seq, it is called \emph{n\_ary\_f}. To fix this:

\input{n_ary_wrapped}

We have, though, introduced some repetition now. We always want to update the wrapper for every decorator.

\input{n_ary_decorated}

or

\input{decorator_darius_bacon}




\subsubsection{Memoization - A performance tool}

\input{memo}




\subsubsection{Count Calls - A debugging tool}

\input{countcalls}

Observe the ratio 1.618 = $(1+\sqrt{5})/2$, \emph{the Golden Ratio}\index{The Golden Ratio}.




\subsubsection{Trace - A debugging tool}

\input{trace}



\subsubsection{Disabled - A debugging tool}

Another name for the identity function. If one of the debug tools are being used (let's say \emph{trace}) and being scattered all around a file, it's easy to disable it by just:

\input{decorator_disabled}





\subsection{The Law of Diminishing Returns}

\subsection{for-loops}
\input{forloop}

\subsection{Substring}
\input{substring}

\subsection{Benchmarking}
\input{benchmarking}

\subsection{Translation Table}
\input{translation_table}

\subsection{Future Imports}\index{python!Future Imports}

In python 2.x, you can do integer division. In python 3, integer division returns a float. If you want this kind of behaviour in python 2.x, do

\input{future_imports}

\subsection{Regular Expressions}\index{Regular Expressions}

Regular expressions describe regular languages and can be represented by a FSM.
If a language is regular, then that language is also context free.
The module to import in python is called re. A regular expression is written

\subsubsection{findall}\index{Regular Expressions!findall}
\input{findall}

where the \emph{r} actually means \emph{raw string} instead of \emph{regular expression}. The + and * operators are called \emph{Kleene Operators}\index{Regular Expressions!Kleene Operators} after Stephen C. Kleene.

\subsubsection{search}\index{Regular Expressions!search}
\input{search}j

\begin{tabular}{r | l}
	\textbackslash b & word boundary \\
	* & Kleene Operator \\
	+ & Kleene Operator
\end{tabular}

\subsubsection{split}\index{Regular Expressions!split}
\input{re_split}

\subsection{sub}\index{Regular Expressions!sub}
\input{re_sub}

j\subsection*{â€¢}

Grammar describe context free languages, a more powerful set of strings than regular languages, and is represented by context free grammar. If a language is context-free, then that language is sometimes also regular.

\begin{tabular}{r l}
	r'ab' $\Rightarrow$ & g $\rightarrow$ a b \\
	r'a*' $\Rightarrow$ & g $\rightarrow \epsilon$ \\
	& g $\rightarrow$ a g \\
	r'a$|$b' $\Rightarrow$ & g $\rightarrow$ a \\
	& g $\rightarrow$ b \\	
\end{tabular}

It's f.ex. impossible to capture balanced parenthesis with regular expressions.

A grammar is abiguous if at least 1 string in the grammar has more than 1 different parse tree.



\subsection{Problems}\index{Problems}


\subsubsection{Water Pouring Problem}\index{Problems!Water Pouring}

\input{water_pouring_problem}


\subsubsection{The Bridge - Lowest Cost Search}\index{Problems!Bridge}

\input{lcs}


\subsubsection{Missionaries and Cannibals - Shortest Path Search}\index{Problems!Missionaries and Cannibals}

\input{sps}



\section{Some Other Section}

\subsection*{Finite State Machine (FSM)}\index{Finite State Machine}
A visual representation or a pictorial equivalent to regular expressions. A \textbf{non-deterministic FSM}\index{Finite State Machine!non-deterministic FSM} includes epsilon transitions or ambiguity. 
A \textbf{deterministic FSM}/\textbf{lock-step FSM}\index{Finite State Machine!deterministic FSM} includes  epsilon edges or ambiguity. However, every non-deterministic FSM has a corresponding deterministic FSM that accepts exaclty the same strings. Non-deterministic FSMs are not more powerful, they are just more convenient.

\subsection{Aspect-oriented Programming}
Separate debugging/efficiency statements and the correctness program.

\subsection*{Server}
A server is a machine optimized for sitting in a closet and hosting files.

\section{Hyper Text Markup Language (HTML)}\index{HTML}

Invented by Tim Berners-Lee around 1990 and credited with inventint the world-wide web.

Use the tags \emph{strong}\index{HTML!strong} and \emph{em}\index{HTML!em} when the contents of your page requires that certain words or phrases be stressed. If you are only highlighting for visual effect use the tags \emph{b}\index{HTML!b} and \emph{i}\index{HTML!i}.

\subsection{HTTP Request}\index{HTML!Request}

\begin{list}{*}{
\setlength{\itemsep}{0pt}
\setlength{\parsep}{0pt}
\setlength{\topsep}{0pt}
\setlength{\partopsep}{0pt}
\setlength{\leftmargin}{2em}
\setlength{\labelwidth}{1.5em}
\setlength{\labelsep}{0.5em}
}
\item Cookie: user\_id = 12345; last\_seen = Dec 25, 1985
\end{list}

\subsubsection{GET Request}\index{HTML!Request!GET}

GET requests are often used for fetching documents and GET parameters are usually used to describe which document we are looking for or what page we are on, etc. They are included in the URL and are ok to cache, should not be used to change the server and are affected by the maximum URL length.
GET request: GET /foo HTTP/1.1

\subsubsection{POST Request}\index{HTML!Request!POST}

POST parameters are included in the request body, have no max length and are often used for updating data. They are almost never cached.

\subsection{HTTP Response}\index{HTTP Response}
A response can be static\index{HTTP Response!static}, which is a pre-written file or dynamic\index{HTTP Response!dynamic}, which is a page made on the fly by programs called web applications\index{HTTP Response!web application}.

\begin{list}{*}{
\setlength{\itemsep}{0pt}
\setlength{\parsep}{0pt}
\setlength{\topsep}{0pt}
\setlength{\partopsep}{0pt}
\setlength{\leftmargin}{2em}
\setlength{\labelwidth}{1.5em}
\setlength{\labelsep}{0.5em}
}
\item Response: HTTP/1.1 200 OK
\item Date: Tue Mar 2012 04:33:33 GMT
\item Server: Apache /2.2.3 - Similar to User-Agent header on the request. Best to make this up, otherwise you're just giving away free information to a would be hacker that want to know what vulnerability that works against you.
\item Content-Type: text/html; charset=utf-8
\item Content-Length: 1539
\item Set-Cookie: user\_id = 12345; Domain = www.example.com; Path = /foo
\item Set-Cookie: last\_seen = Dec 25, 1985
\end{list}

\subsubsection*{Status Codes}
200 OK
302 Found - The document is located somewhere else
404 Not Found
500 Server Error - The server broke trying to handle your request

\subsubsection*{HTML Header}\index{HTML!HTML Header}
Valid headers, such as \emph{User-Agent}\index{HTML!HTML Header!User-Agent}, \emph{Host}\index{HTML!HTML Header!Host}, but really, you can make up all the headers you want.

Use the \emph{$<$br /$>$}\index{HTML!br} tag instead of \emph{$<$br$>$} for an inline line break, but the \emph{p} tag to make a block.

Use the \emph{span}\index{HTML!span} for an inline container, which content can be styled, and \emph{div}\index{HTML!div} for a block container.

If your browser crashes, you should quit using Internet Explorer.

\section*{Cryptography}

\subsection*{Shannon's Keyspace Theorem}
\label{sec:shannon's_keyspace_theorem}

\subsection*{Monoalphabetic Substitution Cipher}\index{Monoalphabetic Substitution Ciper}

Each letter in the alphabet is mapped to a substitution letter.

\textbf{CT only attack}. "E" is the most common letter in the English language (appears about 12.7\% of the time), which will appear as the most frequent coded letter in the cipher. Next is "T" (9.1\%), "A" (8.1\%), etc. Next step is to study frequency of pairs of letters: "he", "an", "in", etc.

One way to prove that the cipher is imperfect, is to use \emph{Shannon's Keyspace Theorem}\ref{sec:shannon's_keyspace_theorem}. Assume a 26-letter alphabet,

\begin{equation}
|K| < |M|, 26! < 2^{89}, 26! < 26^{19}.
\end{equation}

Another way to prove the cipher's imperfection is by showing a ciphertext \emph{c} that could not decrypt to a message \emph{m} for any key \emph{k},

\begin{equation}
c = \mathsf{aa}, m = \mathsf{cs}
\end{equation}

\subsection*{Randomness}
\textbf{Kolmogorov Complexity}\index{Kolmogorov Complexity}.
$K(s) = $length of the shortest possible description of s [Andrey Kolmogorov (1903-1987)]. If there isn't any short program that can describe the sequence, that's an indication that the sequence is random, e.i, \emph{s} is random if $K(s) = |s| + C$. There's no simplier way to understand the sequence other than to see the whole sequence. However, the Kolmogorov Complexity is \textbf{uncomputable}.

\textbf{Statistical Tests} - can only show non-randomness. We can always find some non-random sequence that satisfies all of our statistical tests.

\textbf{Physically Random Events}\begin{list}{*}{
\setlength{\itemsep}{0pt}
\setlength{\parsep}{0pt}
\setlength{\topsep}{0pt}
\setlength{\partopsep}{0pt}
\setlength{\leftmargin}{2em}
\setlength{\labelwidth}{1.5em}
\setlength{\labelsep}{0.5em}
}
\item Quantum Mechanics
\item Thermal Noise
\item User key presses/mouse movements (?)
\end{list}

\textbf{Pseudo-Random Number Generator (PRNG)}\index{Pseudo-Random Number Generator} takes a small amount of physical randomness and turn them into a long sequence of apparently "random" bits. This can be done by extracting a seed once from a \emph{random pool} and reusing it in every step, encrypting a sequence of values (which can be a counter).

Does this produce a sequence that appears random? No, it repeats values too infrequently, why the key is changed every few million outputs. Another concern is whether the pool of randomness is good enough. On unix machines, this pool is stored in \emph{/dev/random} and is collecting events that are believed to be random, like user interactions. A popular PRNG is \emph{Fortuna}.

\subsection{Secret Sharing}

Share a 100-bit long secret among 4 people requires 300 key bits.
\begin{equation}
\begin{split}
A: m \oplus k_1 \oplus k_2 \oplus k_3 \\
B: k_1 \\
C: k_2 \\
D: k_3
\end{split}
\end{equation}
 
\subsection*{Cipher Block Chaning (CBC) Mode}\index{CBC Mode}

Assuming \emph{E} has perfect secrecy (impossible since $|K| \ge |M|$), an attacker can still learn the length of the message and which blocks in \emph{m} are equal from a captured \emph{c}, where

\begin{equation}
c_i = E_k(m_i)
\end{equation}

With CBC, 

\begin{equation}
\begin{split}
c_0 = E_k(m_0 \oplus IV) \\
c_i = E_k(m_i \oplus c_{i-1})
\end{split}
\end{equation}

where the initial message block is xor:ed with an initialization vector, \emph{IV}, which should not be repeated. The point with the initialization vector is just to hide repetition in the first block. Being lost, the whole message can still be recovered, except for the very first block.

\begin{equation}
\begin{split}
m_0 = D_k(c_0) \oplus IV \\
m_{n-i} = D_k(c_{n-1}) \oplus c_{n-2}
\end{split}
\end{equation}

\begin{list}{*}{
\setlength{\itemsep}{0pt}
\setlength{\parsep}{0pt}
\setlength{\topsep}{0pt}
\setlength{\partopsep}{0pt}
\setlength{\leftmargin}{2em}
\setlength{\labelwidth}{1.5em}
\setlength{\labelsep}{0.5em}
}
\item Requires the encryption function to be invertable
\item Does not need the IV to be kept secret, used like another cipher text block. Important is just to not reuse the IV
\item Does not provide any protection against tampering
\item The final cipher text block depends on all message blocks
\end{list}

\subsection{Lexical Analysis - Lexing}

Break something down into words. A \emph{token} is the smallest unit of lexical analysis output.

\begin{tabular}{r | l}
	LANGLE & $<$ \\
	LANGLESLASH & $<$\slash \\
	RANLGE & $>$ \\
	EQUAL & = \\
	STRING & "google.com" \\
	WORD & Welcome!
\end{tabular}

A \emph{Lexical Analyzer} or \emph{lexer} is a collection of token definitions, with the first listed is the winner.

\input{tokens}

A state can be either \emph{exclusive} or \emph{inclusive}.

\input{token_states}

\subsection{Syntactical Analysis - Parsing}

Breaking down a list of tokens to see if it's valid in the grammar or breaking down a list of words to see if they follow the rules of a language.

A \emph{parsing state} is a rewrite rule from the grammar, augmented with one red dot on the right hand side of the rule.

\input{parsing}

\subsection{JavaScript}\index{JavaScript}

\emph{Identifier} are \emph{variable} names or \emph{function} names.

\input{factorial}
\input{token_eolcomment}
\input{token_identifier}

\subsection*{Counter (CTR) Mode}\index{CTR Mode}

The IV is usually devided into a \emph{nonce} and the counter in 64-blocks each (for AES).

\begin{equation}
\begin{split}
c_i = E_k(\textsf{nonce}||i) \oplus m_i \\
m_i = c_i \oplus E_k(\textsf{nonce}||i)
\end{split}
\end{equation}

\begin{list}{*}{
\setlength{\itemsep}{0pt}
\setlength{\parsep}{0pt}
\setlength{\topsep}{0pt}
\setlength{\partopsep}{0pt}
\setlength{\leftmargin}{2em}
\setlength{\labelwidth}{1.5em}
\setlength{\labelsep}{0.5em}
}
\item The encryption function does not need to be invertable
\item The cipher text is a little longer than the message
\item If you encrypt the samme message twice, you will get different ciphertexts
\item Parallelizable (unlike CBC). The encryption function does not depend on the message and can be computed in advance. if you have 3 AES engines encryption will work 3 times as fast
\item Does not need padding
\item In every single aspect CTR Mode dominates CBC and is the recommended mode to be used today
\end{list}

\subsection*{Cipher Feedback (CFB) Mode}

Uses an additional parameter $s < n$, which is the size of the message block that is less than the normal block size of the cipher.

\begin{equation}
\begin{split}
x_0 = IV \\
x_i = x_{i-1}[s:]||c_{i-1} \\
c_i = E_k(x_i)[:s] \oplus m_i
\end{split}
\end{equation}

Decryption

\begin{equation}
\begin{split}
m_i = c_i \oplus E_k(x_i)[:s] \\
x_i = x_{i-1}[s:]||c_i \\
x_0 = IV
\end{split}
\end{equation}

\begin{list}{*}{
\setlength{\itemsep}{0pt}
\setlength{\parsep}{0pt}
\setlength{\topsep}{0pt}
\setlength{\partopsep}{0pt}
\setlength{\leftmargin}{2em}
\setlength{\labelwidth}{1.5em}
\setlength{\labelsep}{0.5em}
}
\item Does not require the encryption function to be invertable
\item Does not need the IV to be kept secret, used like another cipher text block. Important is just to not reuse the IV.
\item Can use small message blocks, by only encrypt the message in chunks of size s. Turns the block cipher into a stream cipher
\item Does not provide any protection against tampering
\item The final cipher text block depends on all message blocks
\end{list}

%\includegraphics[scale=1]{cbc.eps}
 
\paragraph{Outline}
The remainder of this article is organized as follows.
Section~\ref{previous work} gives account of previous work.
Our new and exciting results are described in Section~\ref{results}.
Finally, Section~\ref{conclusions} gives the conclusions.

\section{Google App Engine}\index{Google App Engine}

\subsection{Handlers}\index{Google App Engine!Handlers}

\input{handler}

\subsection{Forms}\index{Google App Engine!Forms}

\input{engine_validations}

User input need to be esacped.

\input{engine_escape_html}

\subsubsection{Redirection}\index{Google App Engine!Forms!Redirection}

With redirection one can reload the page without having resubmitting a form. It's also good practice to have distinct pages for forms and successes.



\subsection{Templates}\index{Google App Engine!Templates}

Install the \emph{jinja2} library

\begin{tabular}{l}
sudo easy\_install jinja2
\end{tabular}

and modify your \emph{app.yaml} file

\input{app_jinja2}

Make a simple html file in your \emph{templates} directory

\input{front}

and write your main file

\input{asciichan}

\subsection{CSS}\index{Google App Engine!CSS}

\input{app_css}

\subsection{Google App Engine Datastore}
\
\textbf{Entity.} Tables, where the columns aren't fixed, all have id fields and have a notion of parents/ancestors which is a relation to other entities.



\subsubsection{GQL}\index{Google App Engine!Google App Engine Datastore!GQL}

A simplified version of SQL, where all queries begins with \emph{select *}, there are no joins and all queries must be indexed.

\input{gql}

\subsubsection{Types}\index{Google App Engine!Google App Engine Datastore!Types}

\begin{list}{*}{
\setlength{\itemsep}{0pt}
\setlength{\parsep}{0pt}
\setlength{\topsep}{0pt}
\setlength{\partopsep}{0pt}
\setlength{\leftmargin}{2em}
\setlength{\labelwidth}{1.5em}
\setlength{\labelsep}{0.5em}
}
\item Integer
\item Float
\item String - $<$ 500 chars, can be indexed and sorted
\item Text - $>$ 500 chars, cannot be indexed or sorted
\item Date
\item Time
\item DateTime
\item Email
\item Link
\item PostalAddress
\end{list}

\input{post_model}

\subsection{Cookies}

A small piece of (temporary) data, clientside enforced stored in the browser for a website. Generally one can store about 20 cookies per website, which is a browser limitation. The length of the cookie is limited to around 4 kb. It also has to be a direct match or a subset to a particular domain.

Good uses of cookies
\begin{list}{*}{
\setlength{\itemsep}{0pt}
\setlength{\parsep}{0pt}
\setlength{\topsep}{0pt}
\setlength{\partopsep}{0pt}
\setlength{\leftmargin}{2em}
\setlength{\labelwidth}{1.5em}
\setlength{\labelsep}{0.5em}
}
\item Storing login information
\item Storing small amounts of data to avoid hitting a database
\item tracking a user for ads
\item \textcolor{red}{storing user preferences info - NO, want data to survice}
\end{list}

One can change a cookie within the console in one's browser's development tools

\begin{tabular}{l}
document.cookie $\#$ "visits=6" \\
document.cookie="visits=10000"
\end{tabular}

Secure the cookie with a HMAC\index{Cookies!HMAC}

\input{app_cookie}

\begin{tabular}{l}
document.cookie $\#$ "visits=6|295c82aceeb5f3715e6e3304199e1ae0" \\
\end{tabular}

\section{Qotes}

Ascii art. It's a fantastic way for people to waste their time in front of their keyboards. - Hoffman

If your data has structure, use Oracle. If your data has no structure, use Hadoop. If your data has no value, use MongoDB.

Time flies like an arrow, fruit flies like a banana.



\bibliographystyle{abbrv}
\bibliography{main}

\printindex

\end{document}
